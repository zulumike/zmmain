<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travtipping Assistant</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>游냁 Travtipping Assistant</h1>
        
        <div class="section">
            <h2>1. Importer L칮psdata</h2>
            <div class="import-section">
                <p>Lim inn data i formatet: <code>Hestenummer | Hestenavn | Spill (%)</code></p>
                <textarea id="dataInput" placeholder="Eks:&#10;1 | Stormvind | 12.5&#10;2 | Sn칮storm | 8.3&#10;3 | Lykkeskud | 15.2"></textarea>
                <button onclick="importData()">Importer Data</button>
            </div>
        </div>

        <div class="section">
            <h2>0. Hent l칮psdata fra API</h2>
            <div class="import-section">
                <p>Lim inn en base-URL for API-kallet og angi hvilke l칮p som skal hentes (fra - til).</p>
                <label>API base-URL:</label>
                <input id="apiUrlInput" type="text" placeholder="Eks: https://www.rikstoto.no/api/game/BJ_NR_2025-12-06/betdistribution/investment/V75?raceNumber=3" style="width:100%; margin:8px 0 12px 0; padding:8px;">
                <div style="display:flex; gap:12px; align-items:center; margin-bottom:12px;">
                    <label>Fra l칮p: <input id="raceFromInput" type="number" min="1" value="1" style="width:80px; margin-left:8px;"></label>
                    <label>Til l칮p: <input id="raceToInput" type="number" min="1" value="6" style="width:80px; margin-left:8px;"></label>
                    <button id="fetchRacesBtn">Hent l칮p</button>
                </div>
                <div id="fetchProgress" class="no-data">Ingen l칮p hentet enn친</div>
            </div>
        </div>

        <div class="section">
            <h2>2. L칮psdata og Tips</h2>
            <div id="raceDataContainer" style="display: none;">
                <div class="controls">
                    <label>
                        Pris per rad: 
                        <input type="number" id="pricePerRow" value="1" min="0.1" step="0.1" onchange="updateCost()">
                    </label>
                    <label>
                        Antall hester p친 bongen: 
                        <input type="number" id="horsesOnBet" value="3" min="1" max="20" onchange="updateRecommendation()">
                    </label>
                </div>

                <table id="dataTable" class="data-table">
                    <thead>
                        <tr>
                            <th>Heste nr</th>
                            <th>Navn</th>
                            <th>Spill %</th>
                            <th>Din Tipp</th>
                            <th>Din Ranking (1-5)</th>
                            <th>Poengsum</th>
                            <th>Anbefalt</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                    </tbody>
                </table>
            </div>
            <div id="noData" class="no-data">Ingen data importert enn친</div>
        </div>

        <div class="section">
            <h2>3. Resultat og Anbefaling</h2>
            <div class="results-section">
                <div class="recommendation-box">
                    <h3>Foresl친tte Hester:</h3>
                    <div id="recommendationList" class="recommendation-list">
                        Ingen data importert
                    </div>
                </div>

                <div class="cost-box">
                    <h3>Kostnadsberegning</h3>
                    <div class="cost-calculation">
                        <div class="cost-row">
                            <span>Antall valgte hester:</span>
                            <span id="selectedCount">0</span>
                        </div>
                        <div class="cost-row">
                            <span>Pris per rad:</span>
                            <span id="priceDisplay">1.00 kr</span>
                        </div>
                        <div class="cost-row">
                            <span>Totale mulige kombinasjoner:</span>
                            <span id="combinations">0</span>
                        </div>
                        <div class="cost-row total">
                            <span>Total kostnad:</span>
                            <span id="totalCost">0.00 kr</span>
                        </div>
                    </div>
                </div>

                <div class="info-box">
                    <h3>Forklaring av Poengsum:</h3>
                    <ul>
                        <li><strong>Spill %:</strong> Hvor mye andre har tippt p친 hesten (fra data)</li>
                        <li><strong>Din Tipp:</strong> Dine egne tips (J/N)</li>
                        <li><strong>Din Ranking:</strong> Din personlige vurdering (1=d친rligst, 5=best)</li>
                        <li><strong>Poengsum:</strong> Kombinert score basert p친 alle faktorer</li>
                        <li><strong>Anbefalt:</strong> Systemet anbefaler de beste hestene ut fra poengsum</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="index.js"></script>
</body>
</html>
